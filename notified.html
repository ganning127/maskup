<!DOCTYPE html>
<html>

	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="shortcut icon" type="image/png" href="./img/logo.png" />

		<link rel="preconnect" href="https://fonts.gstatic.com">
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" rel="stylesheet">

		<script src="./js/main.js"></script>
		<script src="./js/covid.js"></script>

		<link rel="stylesheet" href="./css/main.css">
		<link rel="stylesheet" href="./css/group.css">
		<title>MaskUp</title>
	</head>

	<body>


		<nav class="navbar navbar-expand-md navbar-light">
			<a class="navbar-brand bold-blue" href="index" style="font-size: 1.6rem">
				<img src="./img/logo.png" alt="MaskUp Logo" width="60" height="60">
				MaskUp
			</a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse justify-content-end mr-4" id="navbarText">
				<ul class="navbar-nav">
					<li class="nav-item">
						<a class="nav-link" href="detect">Detect <span class="sr-only">(current)</span></a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="group">Group</a>
					</li>
					<li class="nav-item active">
						<a class="nav-link" href="notified">Get Notified</a>
					</li>

				</ul>


				{{#private}}
					<div class="dropdown">
						<button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							<img src='{{avatar}}' class="avatar">
						</button>


						<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
							<a class="dropdown-item" onclick='logout()'>Log Out</a>
							<a class="dropdown-item" href='symptom'>Symptoms</a>
							<a class="dropdown-item" href='result'>Result</a>
							<a class="dropdown-item" href='notes'>Notes</a>
						</div>


					</div>
				{{/private}}

				{{^private}}
					<div class="dropdown">
						<button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							<img src='https://www.seekpng.com/png/detail/115-1150456_avatar-generic-avatar.png' class="avatar">
						</button>

						<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
							<a class="dropdown-item" href='signup'>Sign Up</a>
							<a class="dropdown-item" href='login'>Login</a>
						</div>

					</div>
				{{/private}}


			</div>
		</nav>


		<section class="main">
			<div class="jumbotron jumbotron-fluid">
				<div class="container text-center">

					<div class="row">
						<div class="col-sm-7 d-flex align-items-center">
							<div>
								<h1 class="bold-blue display-3">20 seconds.</h1>
								<h1 class="bold-blue display-3">20 million bacteria.</h1>
							</div>
						</div>
						<div class="col-sm-5 d-flex align-items-center justify-content-center">
							<img src="./img/logo.png" alt="logo" class="img-fluid">
						</div>
					</div>

				</div>
			</div>
		</section>

		<section>
			<div class="container">
				<form onsubmit="create(event)">
					<div class="form-group">
						<label for="tel" class="bold-blue">Phone Number</label>
						<input type="tel" class="form-control" id="tel" aria-describedby="telHelp" name="tel" required>
						<small id="telHelp" class="form-text opac-blue">We'll never share your phone number with anyone else.</small>
					</div>
					<button type="submit" class="btn hover-effect blue-hover">Submit</button>
				</form>
			</div>
		</section>

		<div class="separator"></div>

		<hr />
		<!-- Footer -->
	<footer class="text-center text-lg-start faded-blue">
		<!-- Section: Social media -->
		<!-- Section: Social media -->

		<!-- Section: Links  -->
		<section class="">
			<div class="container text-center text-md-start mt-5">
				<!-- Grid row -->
				<div class="row mt-3">
					<!-- Grid column -->
					<div class="col-md-3 col-lg-4 col-xl-3 mx-auto mb-4">
						<!-- Content -->
						<h6 class="text-uppercase fw-bold mb-4 bold-blue">
							<i class="fas fa-hospital-user me-3 bold-blue"></i> MaskUp
						</h6>
						<p>
							MaskUp is a web app that uses machine learning to detect whether or not a user, or group of people have a
							mask on!
						</p>
					</div>
					<!-- Grid column -->


					<!-- Grid column -->
					<div class="col-md-3 col-lg-2 col-xl-2 mx-auto mb-4">
						<!-- Links -->
						<h6 class="text-uppercase fw-bold mb-4 bold-blue">
							<i class="fas fa-link -user me-3 bold-blue"></i> Useful links
						</h6>
						<p>
							<a href="#" class="text-reset">Home</a>
						</p>
						<p>
							<a href="detect.html" class="text-reset">Detect</a>
						</p>
						<p>
							<a href="group.html" class="text-reset">Group Detect</a>
						</p>
						<p>
							<a href="notified.html" class="text-reset">Get Notified</a>
						</p>
					</div>
					<!-- Grid column -->

					<!-- Grid column -->
					<div class="col-md-4 col-lg-3 col-xl-3 mx-auto mb-md-0 mb-4">
						<!-- Links -->
						<h6 class="text-uppercase fw-bold mb-4 bold-blue">
							<i class="fas fa-id-card -user me-3 bold-blue"></i> Contact
						</h6>
						<i class="fas fa-home"></i> Morrisville, NC, 27560

						<i class="fas fa-envelope me-3"></i>
						maskuporg@gmail.com

						<i class="fas fa-phone me-3"></i>(919) 527-9302
					</div>
					<!-- Grid column -->
				</div>
				<!-- Grid row -->
			</div>
		</section>
		<!-- Section: Links  -->

		<!-- Copyright -->
		<div class="text-center cpy p-4" style="background-color: transparent;">
			Â© 2021 Copyright:
			<a class="text-reset fw-bold" href="#">MaskUp</a>
		</div>
		<!-- Copyright -->
	</footer>


		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.slim.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.7/js/tether.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>

		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
		<script src="./js/main.js"></script>
		<script>
			// function addPhone(event) {
			// 	event.preventDefault();

			// 	let email = document.getElementById("tel")
			// 		.value;
			// 	console.log(email)
			// 	let endpoint = "https://facemaskreminderupload.azurewebsites.net/api/faceMaskRemindersUpload?code=FXHGMUVSuI/CoRncBVaNe29bM0HLrqUtbUbFOAEcSsgNiloxh2Ljqw==";
			// 	fetch(endpoint, {
			// 			method: "POST",
			// 			headers: {
			// 				email: email
			// 			}
			// 		})
			// 		.then(resp => {
			// 			console.log(resp)
			// 			return resp.json()
			// 		})
			// 		.then(data => {
			// 			console.log(data)
			// 		})

			// }

			async function create(event) {
				event.preventDefault()
				console.log("posting")
				let tel = "+1" + document.getElementById("tel")
					.value;
				console.log(tel)

				let values = await getall();
				console.log(values)

				let phones = [];

				for (let i = 0; i < values.length; i++) {
					// if the current phone is in the list, return out of the function
					if (tel == values[i].data.tel) {
						console.log("they are the same");
						alert("phone number is already in our database!")
						return;
					}
				}

				const resp = await fetch('/~/MaskUp/open/phones', {
					method: 'POST',
					headers: { 'Content-Type': 'application/json' },
					body: JSON.stringify({
						tel
					})
				})
				const ans = await resp.json();
				console.log(ans)
			}

			async function getall() {
				const resp = await fetch('/~/MaskUp/open/phones?all=true', {
					method: 'GET',
					headers: { 'Content-Type': 'application/json' }
				})
				const ans = await resp.json();
				return ans
			}
		</script>

	</body>

</html>